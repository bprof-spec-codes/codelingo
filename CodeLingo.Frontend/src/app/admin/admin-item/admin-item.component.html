<div class="item-row rounded row align-items-center border-bottom small py-2 ">
  <div class="col-2 text-truncate fw-bold text-primary">{{ question.title }}</div>
  <div class="col-4 text-truncate">{{ question.questionText }}</div>
  <div class="col-2">{{ question.difficulty }}</div>
  <div class="col-2">{{ question.language }}</div>

  <div class="col-2 text-end d-flex flex-wrap justify-content-end align-items-center gap-2">
    <button class="btn btn-sm btn-outline-secondary" (click)="toggleDetails()">
      <i [ngClass]="{ 'bi bi-chevron-down': !showDetails, 'bi bi-chevron-up': showDetails }"></i>
    </button>
    <button class="btn btn-sm btn-outline-warning d-none d-sm-inline" title="Szerkesztés" (click)="startEdit()">
      <i class="bi bi-pencil-square"></i>
    </button>
    <button class="btn btn-sm btn-outline-danger d-none d-sm-inline" title="Törlés">
      <i class="bi bi-trash"></i>
    </button>
  </div>
</div>

<!-- Lenyíló rész -->
<div class="details py-2" [class.show]="showDetails">
  <div class="content small">

    <!-- Közös mezők -->
    <p><strong>Question:</strong> {{ question.questionText }}</p>
    <p><strong>ID:</strong> {{ question.id }}</p>
    <p><strong>Type:</strong> {{ question.type }}</p>
    <p><strong>Explanation:</strong> {{ question.explanation }}</p>
    <p><strong>Tag-ek:</strong> {{ question.tags }}</p>
    <p><strong>Létrehozva:</strong> {{ question.createdAt | date }}</p>
    <p><strong>Frissítve:</strong> {{ question.updatedAt | date }}</p>
    <p><strong>Aktív:</strong> {{ question.isActive ? 'Igen' : 'Nem' }}</p>

    <!-- MultipleChoice -->
    <div *ngIf="mcQuestion">
      <p><strong>Options:</strong></p>
      <ul>
        <li *ngFor="let opt of mcQuestion.options">{{ opt }}</li>
      </ul>
      <p><strong>Correct answers:</strong> {{ mcQuestion.correctAnswerIds.join(', ') }}</p>
      <p><strong>Allow multiple:</strong> {{ mcQuestion.allowMultipleSelection ? 'Igen' : 'Nem' }}</p>
      <p><strong>Shuffle options:</strong> {{ mcQuestion.shuffleOptions ? 'Igen' : 'Nem' }}</p>
    </div>

    <!-- CodeCompletion -->
    <div *ngIf="ccQuestion">
      <p><strong>Starter code:</strong></p>
      <pre>{{ ccQuestion.starterCode }}</pre>
      <p><strong>Correct answer:</strong></p>
      <pre>{{ ccQuestion.correctAnswer }}</pre>
      <div *ngIf="ccQuestion.hints.length">
        <p><strong>Hints:</strong></p>
        <ul>
          <li *ngFor="let h of ccQuestion.hints">{{ h }}</li>
        </ul>
      </div>

      <div *ngIf="ccQuestion.constraints.length">
        <p><strong>Constraints:</strong></p>
        <ul>
          <li *ngFor="let c of ccQuestion.constraints">{{ c }}</li>
        </ul>
      </div>
    </div>

    <!-- Default -->
    <div *ngIf="!mcQuestion && !ccQuestion">
      <p>Nincs extra adat ehhez a kérdéstípushoz.</p>
    </div>
  </div>
<div *ngIf="editing">
  <app-admin-edit 
    [question]="question" 
    (save)="onSave($event)" 
    (cancel)="editing = false">
  </app-admin-edit>
</div>